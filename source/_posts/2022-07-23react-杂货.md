---
title: React@16.5.0 杂货
date: 2022-07-23 00:25:08
categories: React@16.5.0
tags: [React@16.5.0]
cover:
---

## 注意版本哈

<a href="https://juejin.cn/post/7034899177205137438" target="_blank" >从前有座山之 react 源码解读之 ReactContext</a>

<a href="https://blog.csdn.net/m0_51744158/article/details/120870752" target="_blank" >React 源码解析————ReactContext.js,ReactLazy.js</a>

<a href="https://www.cnblogs.com/sunxiaopei/p/12239160.html" target="_blank" >React 的 React.createRef()/forwardRef()源码解析(三)</a>

<a href="https://www.cnblogs.com/sunxiaopei/p/12205447.html" target="_blank" >React 的 React.createElement 源码解析(一)</a>

<a href="https://zhuanlan.zhihu.com/p/81947864" target="_blank" >React 源码解析(三) requestWork 之前的的准备工作</a>

<a href="https://wenku.baidu.com/view/4306c6f2d25abe23482fb4daa58da0116c171fe1.html" target="_blank" >react 源码解析 7.Fiber 架构</a>

## 前后版本差异

### expirationTime

expirationTime 越小优先级越高，而现在是 expirationTime 越大优先级越高

### React16 与 17 版本合成事件的区别

- react16 时事件委托的对象是 document，react17 时事件委托的对象是容器组件
- react16 时原生事件与 react 事件执行时，冒泡阶段与捕获阶段没有区分开（捕获-> 冒泡 -> 捕获）；react17 时优化了合成事件的执行，当与原生事件一起调用时，捕获阶段总是先于冒泡阶段（捕获 -> 冒泡）
- react17 废弃了事件池

<!-- ————————————————
版权声明：本文为CSDN博主「Monkey_Kcode」的原创文章，遵循CC 4.0 BY-SA版权协议，转载请附上原文出处链接及本声明。
原文链接：https://blog.csdn.net/weixin_47431743/article/details/122156714 -->

### Hooks的实现原理
React会维护俩个链表，一个是currentHook，另外一个是WorkInProgressHook,每一个节点类型都是Hooks，每当hooks函数被调用，react就会创建一个hooks对象，并挂在链表的尾部，函数组件之所以能做一些类组件不能做的事儿，就是因为hook对象，函数组件的状态，计算值，缓存等都是交给hook去完成的，这样组件通过Fiber.memoizedState属性指向hook链表的头部来关联hook对象和当前组件，这样就发挥了hooks的作用。每次调用hooks API的时候，就会首先调用createWorkInProgressHook函数。得到hooks的串联不是一个数组，而是一个链式结构，从根节点workInProgressHook向下通过next进行串联，这也是为什么Hooks不能嵌套使用，不能在条件判断中使用，不能在循环中使用，否则链式就会被破坏。
<!-- ————————————————
版权声明：本文为CSDN博主「leoxiaoge」的原创文章，遵循CC 4.0 BY-SA版权协议，转载请附上原文出处链接及本声明。
原文链接：https://blog.csdn.net/github_37759996/article/details/119187241 -->