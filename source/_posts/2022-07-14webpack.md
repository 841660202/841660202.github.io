---
title: webpackç³»åˆ—
date: 2022-07-14 22:19:31
categories: é¢è¯•
tags: [é¢è¯•, åŸºç¡€]
cover:
---

## webpack ä¸ gruntã€gulp çš„ä¸åŒï¼Ÿ

- `Gruntã€Gulp` æ˜¯åŸºäºä»»åŠ¡è¿â¾çš„â¼¯å…·ï¼š å®ƒä»¬ä¼šâ¾ƒåŠ¨æ‰§â¾æŒ‡å®šçš„ä»»åŠ¡ï¼Œå°±åƒæµâ½”çº¿ï¼ŒæŠŠèµ„æºæ”¾ä¸Šå»ç„¶åé€šè¿‡ä¸åŒæ’ä»¶è¿›â¾åŠ â¼¯ï¼Œå®ƒä»¬åŒ…å«æ´»è·ƒçš„ç¤¾åŒºï¼Œä¸°å¯Œçš„æ’ ä»¶ï¼Œèƒ½â½…ä¾¿çš„æ‰“é€ å„ç§â¼¯ä½œæµã€‚


- `Webpack` æ˜¯åŸºäºæ¨¡å—åŒ–æ‰“åŒ…çš„â¼¯å…·: â¾ƒåŠ¨åŒ–å¤„ç†æ¨¡å—,webpack æŠŠâ¼€åˆ‡å½“æˆæ¨¡å—ï¼Œå½“ webpack å¤„ç†åº”â½¤ç¨‹åºæ—¶ï¼Œå®ƒä¼šé€’å½’åœ°æ„å»ºâ¼€ä¸ªä¾èµ–å…³ç³»å›¾ (dependency graph)ï¼Œå…¶ä¸­åŒ…å«åº”â½¤ç¨‹åºéœ€è¦çš„æ¯ä¸ªæ¨¡å—ï¼Œç„¶åå°†æ‰€æœ‰è¿™äº›æ¨¡å—æ‰“åŒ…æˆâ¼€ä¸ªæˆ–å¤šä¸ª bundleã€‚ å› æ­¤è¿™æ˜¯å®Œå…¨ä¸åŒçš„ä¸¤ç±»â¼¯å…·,â½½ç°åœ¨ä¸»æµçš„â½…å¼æ˜¯â½¤ npm script ä»£æ›¿ Gruntã€Gulp,npm script åŒæ ·å¯ä»¥æ‰“é€ ä»»åŠ¡æµ

## webpackã€rollupã€parcelã€vite ä¼˜åŠ£ï¼Ÿ

- webpack é€‚â½¤äºâ¼¤å‹å¤æ‚çš„å‰ç«¯ç«™ç‚¹æ„å»º: webpack æœ‰å¼ºâ¼¤çš„ loader å’Œæ’ä»¶â½£æ€,æ‰“åŒ…åçš„â½‚ä»¶å®é™…ä¸Šå°±æ˜¯â¼€ä¸ªâ½´å³ æ‰§â¾å‡½æ•°ï¼Œè¿™ä¸ªâ½´å³æ‰§â¾å‡½æ•°æ¥æ”¶â¼€ä¸ªå‚æ•°ï¼Œè¿™ä¸ªå‚æ•°æ˜¯æ¨¡å—å¯¹è±¡ï¼Œé”®ä¸ºå„ä¸ªæ¨¡å—çš„è·¯å¾„ï¼Œå€¼ä¸ºæ¨¡å—å†…å®¹ã€‚â½´å³æ‰§ â¾å‡½æ•°å†…éƒ¨åˆ™å¤„ç†æ¨¡å—ä¹‹é—´çš„å¼•â½¤ï¼Œæ‰§â¾æ¨¡å—ç­‰,è¿™ç§æƒ…å†µæ›´é€‚åˆâ½‚ä»¶ä¾èµ–å¤æ‚çš„åº”â½¤å¼€å‘.

> webpack æ˜¯ä¸€ä¸ªç°ä»£ JavaScript åº”ç”¨ç¨‹åºçš„é™æ€æ¨¡å—æ‰“åŒ…å™¨(module bundler)ã€‚å½“ webpack å¤„ç†åº”ç”¨ç¨‹åºæ—¶ï¼Œå®ƒä¼šé€’å½’åœ°æ„å»ºä¸€ä¸ªä¾èµ–å…³ç³»å›¾(dependency graph)ï¼Œå…¶ä¸­åŒ…å«åº”ç”¨ç¨‹åºéœ€è¦çš„æ¯ä¸ªæ¨¡å—ï¼Œç„¶åå°†æ‰€æœ‰è¿™äº›æ¨¡å—æ‰“åŒ…æˆä¸€ä¸ªæˆ–å¤šä¸ª bundleã€‚

- Rollup

> æ˜¯ä¸€ä¸ª JavaScript æ¨¡å—æ‰“åŒ…å™¨ï¼Œå¯ä»¥å°†å°å—ä»£ç ç¼–è¯‘æˆå¤§å—å¤æ‚çš„ä»£ç ï¼Œä¾‹å¦‚ library æˆ–åº”ç”¨ç¨‹åºã€‚Rollup å¯¹ä»£ç æ¨¡å—ä½¿ç”¨æ–°çš„æ ‡å‡†åŒ–æ ¼å¼ï¼Œè¿™äº›æ ‡å‡†éƒ½åŒ…å«åœ¨ JavaScript çš„ ES6 ç‰ˆæœ¬ä¸­ï¼Œè€Œä¸æ˜¯ä»¥å‰çš„ç‰¹æ®Šè§£å†³æ–¹æ¡ˆï¼Œå¦‚ CommonJS å’Œ AMDã€‚ES6 æ¨¡å—å¯ä»¥ä½¿ä½ è‡ªç”±ã€æ— ç¼åœ°ä½¿ç”¨ä½ æœ€å–œçˆ±çš„ library ä¸­é‚£äº›æœ€æœ‰ç”¨ç‹¬ç«‹å‡½æ•°ï¼Œè€Œä½ çš„é¡¹ç›®ä¸å¿…æºå¸¦å…¶ä»–æœªä½¿ç”¨çš„ä»£ç ã€‚ES6 æ¨¡å—æœ€ç»ˆè¿˜æ˜¯è¦ç”±æµè§ˆå™¨åŸç”Ÿå®ç°ï¼Œä½†å½“å‰ Rollup å¯ä»¥ä½¿ä½ æå‰ä½“éªŒã€‚

- parcel æé€Ÿé›¶é…ç½® Web åº”ç”¨æ‰“åŒ…å·¥å…·

> ğŸš€ `æé€Ÿæ‰“åŒ…`: Parcel ä½¿ç”¨ worker è¿›ç¨‹å»å¯ç”¨å¤šæ ¸ç¼–è¯‘ã€‚åŒæ—¶æœ‰æ–‡ä»¶ç³»ç»Ÿç¼“å­˜ï¼Œå³ä½¿åœ¨é‡å¯æ„å»ºåä¹Ÿèƒ½å¿«é€Ÿå†ç¼–è¯‘ã€‚
> ğŸ“¦ `å°†ä½ æ‰€æœ‰çš„èµ„æºæ‰“åŒ…`: Parcel å…·å¤‡å¼€ç®±å³ç”¨çš„å¯¹ JS, CSS, HTML, æ–‡ä»¶ åŠæ›´å¤šçš„æ”¯æŒï¼Œè€Œä¸”ä¸éœ€è¦æ’ä»¶ã€‚
> ğŸ  `è‡ªåŠ¨è½¬æ¢`: å¦‚è‹¥æœ‰éœ€è¦ï¼ŒBabel, PostCSS, å’Œ PostHTML ç”šè‡³ node_modules åŒ…ä¼šè¢«ç”¨äºè‡ªåŠ¨è½¬æ¢ä»£ç .
> âœ‚ï¸ `é›¶é…ç½®ä»£ç åˆ†æ‹†`: ä½¿ç”¨åŠ¨æ€ import() è¯­æ³•, Parcel å°†ä½ çš„è¾“å‡ºæ–‡ä»¶æŸ(bundles)åˆ†æ‹†ï¼Œå› æ­¤ä½ åªéœ€è¦åœ¨åˆæ¬¡åŠ è½½æ—¶åŠ è½½ä½ æ‰€éœ€è¦çš„ä»£ç ã€‚
> ğŸ”¥ `çƒ­æ¨¡å—æ›¿æ¢`: Parcel æ— éœ€é…ç½®ï¼Œåœ¨å¼€å‘ç¯å¢ƒçš„æ—¶å€™ä¼šè‡ªåŠ¨åœ¨æµè§ˆå™¨å†…éšç€ä½ çš„ä»£ç æ›´æ”¹è€Œå»æ›´æ–°æ¨¡å—ã€‚
> ğŸš¨ `å‹å¥½çš„é”™è¯¯æ—¥å¿—`:å½“é‡åˆ°é”™è¯¯æ—¶ï¼ŒParcel ä¼šè¾“å‡º è¯­æ³•é«˜äº®çš„ä»£ç ç‰‡æ®µï¼Œå¸®åŠ©ä½ å®šä½é—®é¢˜ã€‚

- vite ä¸‹ä¸€ä»£å‰ç«¯å¼€å‘ä¸æ„å»ºå·¥å…·

> ğŸ“¦ `æé€Ÿçš„æœåŠ¡å¯åŠ¨`: ä½¿ç”¨åŸç”Ÿ ESM æ–‡ä»¶ï¼Œæ— éœ€æ‰“åŒ…!
> âš¡ï¸ `è½»é‡å¿«é€Ÿçš„çƒ­é‡è½½`: æ— è®ºåº”ç”¨ç¨‹åºå¤§å°å¦‚ä½•ï¼Œéƒ½å§‹ç»ˆæå¿«çš„æ¨¡å—çƒ­é‡è½½ï¼ˆHMRï¼‰
> ğŸ› ï¸ `ä¸°å¯Œçš„åŠŸèƒ½`: å¯¹ TypeScriptã€JSXã€CSS ç­‰æ”¯æŒå¼€ç®±å³ç”¨ã€‚
> ğŸ“¦ `ä¼˜åŒ–çš„æ„å»º`: å¯é€‰ â€œå¤šé¡µåº”ç”¨â€ æˆ– â€œåº“â€ æ¨¡å¼çš„é¢„é…ç½® Rollup æ„å»º
> ğŸ”© `é€šç”¨çš„æ’ä»¶`: åœ¨å¼€å‘å’Œæ„å»ºä¹‹é—´å…±äº« Rollup-superset æ’ä»¶æ¥å£ã€‚
> ğŸ”‘ `å®Œå…¨ç±»å‹åŒ–çš„ API`: çµæ´»çš„ API å’Œå®Œæ•´ TypeScript ç±»å‹ã€‚

## æœ‰å“ªäº›å¸¸â»…çš„ Loaderï¼Ÿ

**æ–‡ä»¶ç›¸å…³çš„**

- `raw-loader`ï¼šåŠ è½½æ–‡ä»¶åŸå§‹å†…å®¹ï¼ˆutf-8ï¼‰
- `file-loader`ï¼šæŠŠæ–‡ä»¶è¾“å‡ºåˆ°ä¸€ä¸ªæ–‡ä»¶å¤¹ä¸­ï¼Œåœ¨ä»£ç ä¸­é€šè¿‡ç›¸å¯¹ URL å»å¼•ç”¨è¾“å‡ºçš„æ–‡ä»¶ (å¤„ç†å›¾ç‰‡å’Œå­—ä½“)
- `url-loader`ï¼šä¸ file-loader ç±»ä¼¼ï¼ŒåŒºåˆ«æ˜¯ç”¨æˆ·å¯ä»¥è®¾ç½®ä¸€ä¸ªé˜ˆå€¼ï¼Œå¤§äºé˜ˆå€¼ä¼šäº¤ç»™ file-loader å¤„ç†ï¼Œå°äºé˜ˆå€¼æ—¶è¿”å›æ–‡ä»¶ base64 å½¢å¼ç¼–ç  (å¤„ç†å›¾ç‰‡å’Œå­—ä½“)
- `source-map-loader`ï¼šåŠ è½½é¢å¤–çš„ Source Map æ–‡ä»¶ï¼Œä»¥æ–¹ä¾¿æ–­ç‚¹è°ƒè¯•
- `svg-inline-loader`ï¼šå°†å‹ç¼©åçš„ SVG å†…å®¹æ³¨å…¥ä»£ç ä¸­
- `image-loader`ï¼šåŠ è½½å¹¶ä¸”å‹ç¼©å›¾ç‰‡æ–‡ä»¶
- `json-loader` åŠ è½½ JSON æ–‡ä»¶ï¼ˆé»˜è®¤åŒ…å«ï¼‰
- `handlebars-loader`: å°† Handlebars æ¨¡ç‰ˆç¼–è¯‘æˆå‡½æ•°å¹¶è¿”å›

**è„šæœ¬ç›¸å…³çš„**

- `babel-loader`ï¼šæŠŠ ES6 è½¬æ¢æˆ ES5
- `ts-loader`: å°† TypeScript è½¬æ¢æˆ JavaScript
- `awesome-typescript-loader`ï¼šå°† TypeScript è½¬æ¢æˆ JavaScriptï¼Œæ€§èƒ½ä¼˜äº ts-loader

**æ ·å¼ç›¸å…³çš„**

- `sass-loader`ï¼šå°† SCSS/SASS ä»£ç è½¬æ¢æˆ CSS
- `css-loader`ï¼šåŠ è½½ CSSï¼Œæ”¯æŒæ¨¡å—åŒ–ã€å‹ç¼©ã€æ–‡ä»¶å¯¼å…¥ç­‰ç‰¹æ€§
- `style-loader`ï¼šæŠŠ CSS ä»£ç æ³¨å…¥åˆ° JavaScript ä¸­ï¼Œé€šè¿‡ DOM æ“ä½œå»åŠ è½½ CSS
- `postcss-loader`ï¼šæ‰©å±• CSS è¯­æ³•ï¼Œä½¿ç”¨ä¸‹ä¸€ä»£ CSSï¼Œå¯ä»¥é…åˆ autoprefixer æ’ä»¶è‡ªåŠ¨è¡¥é½ CSS3 å‰ç¼€

**æ ¡éªŒç›¸å…³çš„**

- `eslint-loader`ï¼šé€šè¿‡ ESLint æ£€æŸ¥ JavaScript ä»£ç 
- `tslint-loader`ï¼šé€šè¿‡ TSLint æ£€æŸ¥ TypeScript ä»£ç 

**æµ‹è¯•ç›¸å…³çš„**

- `mocha-loader`ï¼šåŠ è½½ Mocha æµ‹è¯•ç”¨ä¾‹çš„ä»£ç 
- `coverjs-loader`ï¼šè®¡ç®—æµ‹è¯•çš„è¦†ç›–ç‡

**æ¡†æ¶ç›¸å…³çš„**

- `vue-loader`ï¼šåŠ è½½ Vue.js å•æ–‡ä»¶ç»„ä»¶

**è¯­è¨€ç›¸å…³çš„**

- `i18n-loader`: å›½é™…åŒ–

**æ€§èƒ½ç›¸å…³çš„**

- `cache-loader`: å¯ä»¥åœ¨ä¸€äº›æ€§èƒ½å¼€é”€è¾ƒå¤§çš„ Loader ä¹‹å‰æ·»åŠ ï¼Œç›®çš„æ˜¯å°†ç»“æœç¼“å­˜åˆ°ç£ç›˜é‡Œ

## æœ‰å“ªäº›å¸¸â»…çš„ Pluginï¼Ÿ

**åŸºæœ¬**

- `define-plugin`ï¼šå®šä¹‰ç¯å¢ƒå˜é‡ (Webpack4 ä¹‹åæŒ‡å®š mode ä¼šè‡ªåŠ¨é…ç½®)
- `html-webpack-plugin`ï¼šç®€åŒ– HTML æ–‡ä»¶åˆ›å»º (ä¾èµ–äº html-loader)
- `web-webpack-plugin`ï¼šå¯æ–¹ä¾¿åœ°ä¸ºå•é¡µåº”ç”¨è¾“å‡º HTMLï¼Œæ¯” html-webpack-plugin å¥½ç”¨
- `clean-webpack-plugin`: ç›®å½•æ¸…ç†

**ç¼–è¯‘èŒƒå›´ä¼˜åŒ–ç›¸å…³**

- `ignore-plugin`ï¼šå¿½ç•¥éƒ¨åˆ†æ–‡ä»¶

**å‹ç¼©ä¼˜åŒ–ç›¸å…³**

- `uglifyjs-webpack-plugin`ï¼šä¸æ”¯æŒ ES6 å‹ç¼© (Webpack4 ä»¥å‰)
- `terser-webpack-plugin`: æ”¯æŒå‹ç¼© ES6 (Webpack4)
- `webpack-parallel-uglify-plugin`: å¤šè¿›ç¨‹æ‰§è¡Œä»£ç å‹ç¼©ï¼Œæå‡æ„å»ºé€Ÿåº¦

**å…¶ä»–ä¼˜åŒ–ç›¸å…³**

- `mini-css-extract-plugin`: åˆ†ç¦»æ ·å¼æ–‡ä»¶ï¼ŒCSS æå–ä¸ºç‹¬ç«‹æ–‡ä»¶ï¼Œæ”¯æŒæŒ‰éœ€åŠ è½½ (æ›¿ä»£ extract-text-webpack-plugin)
- `serviceworker-webpack-plugin`ï¼šä¸ºç½‘é¡µåº”ç”¨å¢åŠ ç¦»çº¿ç¼“å­˜åŠŸèƒ½
- `ModuleConcatenationPlugin`: å¼€å¯ Scope Hoisting

**åˆ†æç›¸å…³**

- `speed-measure-webpack-plugin`: å¯ä»¥çœ‹åˆ°æ¯ä¸ª Loader å’Œ Plugin æ‰§è¡Œè€—æ—¶ (æ•´ä¸ªæ‰“åŒ…è€—æ—¶ã€æ¯ä¸ª Plugin å’Œ Loader è€—æ—¶)
- `webpack-bundle-analyzer`: å¯è§†åŒ– Webpack è¾“å‡ºæ–‡ä»¶çš„ä½“ç§¯ (ä¸šåŠ¡ç»„ä»¶ã€ä¾èµ–ç¬¬ä¸‰æ–¹æ¨¡å—)

## åˆ†åˆ«ä»‹ç» bundleï¼Œchunkï¼Œmodule æ˜¯ä»€ä¹ˆ

- `bundle`ï¼šæ˜¯ç”± webpack æ‰“åŒ…å‡ºæ¥çš„â½‚ä»¶
- `chunk`ï¼šä»£ç å—ï¼Œâ¼€ä¸ª chunk ç”±å¤šä¸ªæ¨¡å—ç»„åˆâ½½æˆï¼Œâ½¤äºä»£ç çš„åˆå¹¶å’Œåˆ†å‰²
- `module`ï¼šæ˜¯å¼€å‘ä¸­çš„å•ä¸ªæ¨¡å—ï¼Œåœ¨ webpack çš„ä¸–ç•Œï¼Œâ¼€åˆ‡çš†æ¨¡å—ï¼Œâ¼€ä¸ªæ¨¡å—å¯¹åº”â¼€ä¸ªâ½‚ä»¶ï¼Œwebpack ä¼šä»é…ç½®çš„ entry ä¸­é€’å½’å¼€å§‹æ‰¾å‡ºæ‰€æœ‰ä¾èµ–çš„æ¨¡å—

## Loader å’Œ Plugin çš„ä¸åŒï¼Ÿ

## webpack çš„æ„å»ºæµç¨‹æ˜¯ä»€ä¹ˆ?

## æè¿°â¼€ä¸‹ç¼–å†™ loader æˆ– plugin çš„æ€è·¯ï¼Ÿ

## webpack çš„çƒ­æ›´æ–°åŸç†ï¼Ÿ

## â½¤ webpack æ¥ä¼˜åŒ–å‰ç«¯æ€§èƒ½

## å¦‚ä½•æâ¾¼ webpack çš„æ‰“åŒ…é€Ÿåº¦?

## å¦‚ä½•æâ¾¼ webpack çš„æ„å»ºé€Ÿåº¦ï¼Ÿ

## æ€ä¹ˆé…ç½®å•â»šåº”â½¤ï¼Ÿæ€ä¹ˆé…ç½®å¤šâ»šåº”â½¤ï¼Ÿ

## source map æ˜¯ä»€ä¹ˆï¼Ÿç”Ÿäº§ç¯å¢ƒæ€ä¹ˆç”¨ï¼Ÿ

## å‚è€ƒé“¾æ¥

<a href="https://juejin.cn/post/6844904094281236487" target="_blank" >åè¡€æ•´ç†ã€å†æ¥ä¸€æ‰“ Webpack é¢è¯•é¢˜</a>

<a href="https://juejin.cn/post/7073869980411887652" target="_blank" >æœ€è¿‘ä¸¤å‘¨å‡ºå»é¢è¯•é‡åˆ°çš„é¢è¯•é¢˜ï¼ˆå‰ç«¯åˆçº§ã€é•¿æ›´ï¼‰</a>
